<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Install Arch Linux using archinstall script | Nikhil Sinha</title>
<meta name="keywords" content="" />
<meta name="description" content="One of the dreams of linux users is to install Arch or Gentoo linux (atleast it was for me). There are many distros that are Arch based like ArcoLinux or EndeavourOS. But they don&rsquo;t give the feeling of installing arch. Installing Arch is little tricky (Gentoo users be like: hold my beer), but there is already archinstall script prebuilt inside the arch live iso. Lets see how easy is the archinstall script.">
<meta name="author" content="Nikhil Sinha">
<link rel="canonical" href="https://nsinha.me/blog/archinstall/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.7bfe087ae72df31787ec7a1360dd05ee246a179b51cf7a30a904b39d7f813b69.css" integrity="sha256-e/4Ieuct8xeH7HoTYN0F7iRqF5tRz3owqQSznX&#43;BO2k=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.b95bacdc39e37a332a9f883b1e78be4abc1fdca2bc1f2641f55e3cd3dabd4d61.js" integrity="sha256-uVus3DnjejMqn4g7Hni&#43;Srwf3KK8HyZB9V4809q9TWE="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://nsinha.me/images/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://nsinha.me/images/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://nsinha.me/images/favicon/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://nsinha.me/images/favicon/apple-touch-icon.png">
<link rel="mask-icon" href="https://nsinha.me/images/favicon/apple-touch-icon.png">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://nsinha.me" accesskey="h" title="Nikhil Sinha (Alt + H)">Nikhil Sinha</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="/" title="Home"><span>Home</span></a>
            </li>
            <li>
                <a href="https://nsinha.me/diary/" title="Diary">
                    <span>Diary</span>
                </a>
            </li>
            <li>
                <a href="https://nsinha.me/blog/" title="Blog">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://nsinha.me/notes/" title="Notes">
                    <span>Notes</span>
                </a>
            </li>
            <li>
                <a href="https://nsinha.me/whatiuse/" title="What I Use">
                    <span>What I Use</span>
                </a>
            </li>
            <li>
                <a href="https://nsinha.me/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title">
      Install Arch Linux using archinstall script
    </h1>
    <div class="post-meta"><span title='2023-03-22 00:00:00 +0000 UTC'>March 22, 2023</span>&nbsp;·&nbsp;Nikhil Sinha</div>
  </header> 
  <div class="post-content">
  <p>One of the dreams of linux users is to install Arch or Gentoo linux (atleast it was for me). There are many distros that are Arch based like ArcoLinux or EndeavourOS. But they don&rsquo;t give the feeling of installing arch. Installing Arch is little tricky (Gentoo users be like: hold my beer), but there is already archinstall script prebuilt inside the arch live iso. Lets see how easy is the archinstall script.</p>
<h3 id="1-connect-to-internet">1. Connect to internet</h3>
<p>Once you have booted arch from the live usb stick, the very first step is to connect to the internet. The arch install requires internet connection to download packages on the go.</p>
<h3 id="11-lan">1.1 LAN</h3>
<p>If you are connected to LAN, then simply check the connectivity by using the ping command.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># ping google.com</span>
</span></span></code></pre></div><p>If the internet connection is working, then the above command will return bytes sent and the time taken. And if the connection is not working, then it will return error.</p>
<h3 id="12-wifi">1.2 WIFI</h3>
<p>If you are on wifi, then you have to do little more work. <code>iwctl</code> is the tool we will be using to connect to wifi network. It will give us the <code>iwd</code> interactive prompt.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># iwctl</span>
</span></span></code></pre></div><p>First, if you do not know your wireless device name, list all Wi-Fi devices:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># device list</span>
</span></span></code></pre></div><p>If the device or its corresponding adapter is turned off, turn it on:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># device deviceName set-property Powered on</span>
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># adapter adapterName set-property Powered on</span>
</span></span></code></pre></div><p>Then, to initiate a scan for networks (note that this command will not output anything):</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># station deviceName scan</span>
</span></span></code></pre></div><p>You can then list all available networks:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># station deviceName get-networks</span>
</span></span></code></pre></div><p>Finally, to connect to a network:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># station deviceName connect SSID</span>
</span></span></code></pre></div><p>Then exit.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="o">[</span>iwd<span class="o">]</span><span class="c1"># exit</span>
</span></span></code></pre></div><p>Now to check the connectivity, use the ping command as shown in above section.</p>
<h3 id="2-configure-the-pacmanconf">2. Configure the pacman.conf</h3>
<p>Before installing arch, lets configure the pacman configuration file to speed up our install process.<br>
By default pacman downloads only one package at a time. This setting can be overridden by changing the configuration file. Open the config file-</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># nano /etc/pacman.conf</span>
</span></span></code></pre></div><p>Find the <code>#ParallelDownloads = 5</code> line, uncomment it and change the value to 30.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="nv">ParallelDownloads</span> <span class="o">=</span> <span class="m">30</span>
</span></span></code></pre></div><p>Save it and exit.</p>
<h3 id="3-install-arch">3. Install Arch</h3>
<p>Use the archinstall magic script.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># archinstall</span>
</span></span></code></pre></div><p>After this, the process is very simple. So I am not writing each step of this. You can figure it out easily. For more details you can look at <a href="https://python-archinstall.readthedocs.io/en/latest/installing/guided.html#description-individual-steps">this doc</a>.</p>
<h3 id="4-post-installation">4. Post Installation</h3>
<p>After the installation is complete, you will be given a prompt to chroot into the newly installed os to do some addition work as required. If you have installed some desktop environment like gnome or kde, then this step is not important. You can skip this step and reboot to your new installed Arch Linux.<br>
But if you have installed some window manager, then you might require some tweaking. The amount of configuration to be done varies from wm&rsquo;s to wm&rsquo;s. I will show you the post install bspwm config you should do.</p>
<h3 id="41-bspwm">4.1 BSPWM</h3>
<p>Once you chroot-ed in the newly installed os. The example configuration is located in <code>/usr/share/doc/bspwm/examples/</code>.<br>
Make the config directory for bspwm and sxhkd.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># mkdir /home/(your user name here)/.config/bspwm</span>
</span></span><span class="line"><span class="cl"><span class="c1"># mkdir /home/(your user name here)/.config/sxhkd</span>
</span></span></code></pre></div><p>After that, you can copy the default config files and make them executable or you can install it with executable rights.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># cp /usr/share/doc/bspwm/examples/bspwmrc /home/(your username here)/.config/bspwm/bspwmrc</span>
</span></span><span class="line"><span class="cl"><span class="c1"># chmod +x /home/(your user name here)/.config/bspwm/bspwmrc</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># cp /usr/share/doc/sxhkd/examples/sxhkdrc /home/(your username here)/.config/sxhkd/sxhkdrc</span>
</span></span><span class="line"><span class="cl"><span class="c1"># chmod +x /home/(your user name)/.config/sxhkd/sxhkdrc</span>
</span></span></code></pre></div><p>OR</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># install -Dm755 /usr/share/doc/bspwm/examples/bspwmrc ~/.config/bspwm/bspwmrc</span>
</span></span><span class="line"><span class="cl"><span class="c1"># install -Dm644 /usr/share/doc/bspwm/examples/sxhkdrc ~/.config/sxhkd/sxhkdrc</span>
</span></span></code></pre></div><p>For changing the terminal of your choice or the keybindings, edit the sxhkd config.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-bash" data-lang="bash"><span class="line"><span class="cl"><span class="c1"># nano /home/(your user name)/.config/sxhkd/sxhkdrc</span>
</span></span></code></pre></div><p>Save it and exit. Finally exit the chroot and then reboot. Hurrayyyyyyy!!!!</p>
<h3 id="final-thought">Final thought</h3>
<p>Installing arch is little tricky and tiresome for newbie&rsquo;s. But at the end, it was fun for me. Got to learn many things that I would have never learnt otherwise. And now I can also say the very famous line, &ldquo;I use Arch, btw&rdquo;. But this is just the beginning. I have to install arch without using the archinstall script.<br>
I would love to hear your opinions and experiences about this topic. And also the mistakes and improvements in the code/blog. You can mail me at <a href="mailto:nikhil@nsinha.me">nikhil@nsinha.me</a> .</p>

  </div>

  <footer class="post-footer">
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span> © Copyright 2023 <a href="https://nsinha.me">Nikhil Sinha</a>.
      
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>


<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
